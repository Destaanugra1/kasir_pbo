{# Panel Keranjang Belanja (kanan) #}
{% load dict_extras idr static %}
<div id="keranjang-items-list" class="p-6 space-y-4 max-h-96 overflow-y-auto">
  {% for item in keranjang_items %}
  <div
    id="cart-item-{{ item.produk.pk }}"
    class="flex items-center justify-between p-4 bg-gray-50 border border-gray-200 rounded-xl hover:shadow-sm transition-all duration-200">
    <div class="flex items-center space-x-3">
      <div
        class="w-10 h-10 bg-gray-200 rounded-lg flex items-center justify-center">
        <span class="text-gray-700 font-semibold text-sm">
          {{ item.produk.name|first|upper }}
        </span>
      </div>
      <div>
        <h4 class="font-semibold text-gray-900 text-sm">
          {{ item.produk.name }}
        </h4>
        <p class="text-xs text-gray-500">
          <span id="cart-qty-{{ item.produk.pk }}">{{ item.qty }}</span>
          x Rp{{ item.produk.price|idr}}
        </p>
      </div>
    </div>
    <div class="flex items-center space-x-2">
      <div class="text-right">
        <p
          class="font-semibold text-gray-900"
          id="cart-subtotal-{{ item.produk.pk }}">
          Rp{{ item.subtotal|idr }}
        </p>
      </div>
      <button
        type="button"
        onclick="removeItemAjax('{{ item.produk.pk }}')"
        class="w-7 h-7 bg-red-500 rounded-lg text-white ml-2 flex items-center justify-center"
        title="Hapus dari keranjang">
        <svg
          class="w-4 h-4"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>
  </div>
  {% endfor %}
  <div
    id="empty-cart-message"
    class="{% if keranjang_items %}hidden{% else %}{% endif %} text-center py-12">
    <div
      class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
      <svg
        class="w-8 h-8 text-gray-400"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24">
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6m6 0V9a2 2 0 00-2-2H9a2 2 0 00-2-2v6" />
      </svg>
    </div>
    <h4 class="text-lg font-semibold text-gray-900 mb-2">Keranjang Kosong</h4>
    <p class="text-gray-500 text-sm">Pilih produk untuk memulai transaksi</p>
  </div>
</div>

<div
  id="checkout-section"
  class="{% if not keranjang_items %}hidden{% endif %} border-t border-gray-200 p-6">
  <div class="flex items-center justify-between mb-6">
    <span class="text-lg font-semibold text-gray-900">Total Pembayaran</span>
    <span id="total-pembayaran" class="text-3xl font-bold text-gray-800"
      >Rp{{ total|idr }}</span
    >
  </div>
  <form method="post" action="{% url 'kasir_checkout' %}">
    {% csrf_token %}
    <button
      type="submit"
      class="w-full inline-flex items-center justify-center px-6 py-3 bg-gray-800 text-white text-lg font-semibold rounded-lg hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transform transition-all duration-200">
      Checkout Sekarang
    </button>
  </form>
</div>
