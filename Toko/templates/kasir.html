{% extends "base.html" %}
{% block content %}
<h2 class="text-xl font-bold mb-4">Sistem Kasir</h2>
<form method="post">
  {% csrf_token %}
  <table class="table-auto w-full mb-4">
    <tr>
      <th>Nama</th><th>Harga</th><th>Stok</th><th>Jumlah</th>
    </tr>
    {% for produk in produk_list %}
    <tr>
      <td>{{ produk.name }}</td>
      <td>Rp{{ produk.price }}</td>
      <td>{{ produk.stock }}</td>
      <td>
        <input type="number" name="qty_{{ produk.pk }}" min="0" max="{{ produk.stock }}" value="0" class="w-16 border rounded px-1">
      </td>
    </tr>
    {% endfor %}
  </table>
  <button type="submit" class="bg-green-500 text-white px-3 py-1 rounded">Tambah ke Keranjang</button>
</form>
<h3 class="mt-6 font-semibold">Keranjang:</h3>
<ul>
  {% for item in keranjang_items %}
  <li>{{ item.produk.name }} x {{ item.qty }} = Rp{{ item.subtotal }}</li>
  {% endfor %}
</ul>
<p class="mt-2 font-bold">Total: Rp{{ total }}</p>
<form method="post" action="{% url 'kasir_checkout' %}">
  {% csrf_token %}
  <button type="submit" class="bg-blue-600 text-white px-3 py-1 rounded mt-2">Checkout</button>
</form>
{% endblock %}